<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>New Year Brawl Clicker</title>
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body, html {
        width: 100%;
        height: 100%;
        overflow: hidden;
        font-family: Arial, sans-serif;
    }

    /* LOADING SCREEN */
    #loadingScreen {
        position: fixed;
        inset: 0;
        background: #3a3a3a;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 32px;
        font-family: "Courier New", monospace;
        animation: fadeout 0.5s ease forwards;
        animation-delay: 2.5s;
        z-index: 10;
    }
    @keyframes fadeout { to { opacity: 0; visibility: hidden; } }

    /* NICKNAME SCREEN */
    #nameScreen {
        position: fixed;
        inset: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #1d1d1d;
        color: white;
        gap: 20px;
        visibility: hidden;
        opacity: 0;
        transition: 0.5s;
        z-index: 9;
    }
    #nameInput { padding: 12px 18px; font-size: 18px; border-radius: 8px; border: none; outline: none; }
    #startBtn { padding: 12px 25px; font-size: 18px; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; }

    /* MAIN GAME SCREEN */
    #gameScreen {
        position: fixed;
        inset: 0;
        background: #0d47a1;
        visibility: hidden;
        opacity: 0;
        transition: 0.5s;
    }

    #nicknameDisplay {
        position: absolute;
        top: 15px;
        left: 15px;
        font-size: 26px;
        font-weight: bold;
        color: white;
    }

    #coinBox {
        position: absolute;
        top: 15px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 28px;
        font-weight: bold;
        color: white;
    }
    #coinBox img { width: 40px; height: 40px; }

    #santa {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 230px;
        user-select: none;
        cursor: pointer;
        transition: transform 0.08s ease;
    }

    /* SOFT SNOW */
    .snow {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
    }

    .snowflake {
        position: absolute;
        top: -10px;
        color: white;
        font-size: 10px;
        opacity: 0.9;
        animation: fall linear infinite;
        will-change: transform, opacity;
        text-shadow: 0 0 6px rgba(255,255,255,0.6);
    }

    @keyframes fall {
        from { transform: translateY(-10px); }
        to   { transform: translateY(110vh); }
    }

    /* Невеликий responsive tweak */
    @media (max-width: 600px) {
        #santa { width: 160px; }
        #nicknameDisplay { font-size: 20px; }
        #coinBox { font-size: 20px; }
    }
</style>
</head>
<body>

<!-- LOADING -->
<div id="loadingScreen">Loading...</div>

<!-- NICKNAME -->
<div id="nameScreen">
    <h2 style="color:white">Enter Nickname</h2>
    <input id="nameInput" placeholder="Your nickname" />
    <button id="startBtn">Start</button>
</div>

<!-- GAME -->
<div id="gameScreen">
    <div class="snow" id="snow"></div>

    <div id="nicknameDisplay"></div>

    <div id="coinBox">
        <img src="coin.png" alt="coin">
        <span id="coins">0</span>
    </div>

    <img id="santa" src="tu_santa_pin.png" alt="santa pin">
</div>

<script>
    // Отримуємо елементи
    const loadingScreen = document.getElementById('loadingScreen');
    const nameScreen = document.getElementById('nameScreen');
    const nameInput = document.getElementById('nameInput');
    const startBtn = document.getElementById('startBtn');
    const gameScreen = document.getElementById('gameScreen');
    const nicknameDisplay = document.getElementById('nicknameDisplay');
    const santa = document.getElementById('santa');
    const coinsSpan = document.getElementById('coins');
    const snowContainer = document.getElementById('snow');

    // Монети
    let coins = 0;

    // Показати екран ніку після лоадінгу
    setTimeout(() => {
        nameScreen.style.visibility = "visible";
        nameScreen.style.opacity = "1";
        // приховати loading (анімація в CSS вже є)
        loadingScreen.style.display = "none";
    }, 2500);

    // Кнопка старт
    startBtn.addEventListener('click', () => {
        const nick = nameInput.value.trim();
        if (!nick) return; // не починаємо без ніка

        nicknameDisplay.textContent = nick;

        // приховуємо екран ніку, показуємо гру
        nameScreen.style.opacity = "0";
        nameScreen.style.visibility = "hidden";

        gameScreen.style.visibility = "visible";
        gameScreen.style.opacity = "1";
    });

    // Логіка кліку по санті: +1 монета
    function giveCoin(amount = 1) {
        coins += amount;
        coinsSpan.textContent = coins;
    }

    // Підтримка кліка та touch
    function pressAnim() {
        santa.style.transform = "translate(-50%, -50%) scale(0.93)";
        setTimeout(() => santa.style.transform = "translate(-50%, -50%) scale(1)", 120);
    }

    santa.addEventListener('click', () => {
        giveCoin(1);
        pressAnim();
    });

    // Також обробимо touchstart для швидшої реакції на мобільних
    santa.addEventListener('touchstart', (e) => {
        e.preventDefault(); // уникаємо дублювання події на деяких пристроях
        giveCoin(1);
        pressAnim();
    }, {passive: false});

    // Сніг: м'який, не густий
    function createSnow() {
        for (let i = 0; i < 18; i++) {
            const flake = document.createElement('div');
            flake.className = 'snowflake';
            flake.textContent = '❄';

            const left = Math.random() * 100;
            const size = Math.random() * 14 + 8; // 8..22px
            const duration = Math.random() * 6 + 6; // 6..12s
            const delay = Math.random() * 3; // невеликий строб

            flake.style.left = left + 'vw';
            flake.style.fontSize = size + 'px';
            flake.style.opacity = (Math.random() * 0.6 + 0.3).toFixed(2);
            flake.style.animationDuration = duration + 's';
            flake.style.animationDelay = delay + 's';

            snowContainer.appendChild(flake);

            // прибрати елемент після завершення анімації
            setTimeout(() => {
                flake.remove();
            }, (duration + delay) * 1000 + 500);
        }
    }

    // старт снігу
    createSnow();
    setInterval(createSnow, 1400);
</script>
</body>
</html>
